# 面经总结
https://blog.51cto.com/u_15717393/5619925

## 1.语言基础

### （0）指针和引用的区别

### （13）C++中static用法和意义

static的意思是静态的，可以用来修饰变量，函数和类成员。

```C++
//变量：被static修饰的变量就是静态变量，它会在程序运行过程中一直存在，会被放在静态存储区。局部静态变量的作用域在函数体中，全局静态变量的作用域在这个文件里
#include <iostream>
using namespace std;

void func() {
	static int a = 0;
	// int a = 0;
	a++;
	cout << a ;
}

int main()
{
	for (int i = 0; i < 5; ++i) {
		func();
	}
	cout<<endl;

	return 0;
}
//12345
```

- 函数：被static修饰的函数就是静态函数，静态函数只能在本文件中使用，不能被其他文件调用，也不会和其他文件中的同名函数冲突。

- 类成员：而在类中，被static修饰的成员变量是类静态成员，这个静态成员会被类的多个对象共用。被static修饰的成员函数也属于静态成员，不是属于某个对象的，访问这个静态函数不需要引用对象名，而是通过引用类名来访问。

【note】静态成员函数要访问非静态成员时，要用过对象来引用。局部静态变量在函数调用结束后也不会被回收，会一直在程序内存中，直到该函数再次被调用，它的值还是保持上一次调用结束后的值。

注意和const的区别。const强调值不能被修改，而static强调唯一的拷贝，对所有类的对象都共用。



### 2. 计网相关

#### 建立TCP服务器的各个系统调用
建立TCP服务器连接的过程中主要通过以下系统调用序列来获取某些函数，这些系统调用主要包括：socket（），bind（），listen（），accept（），send（）和recv（）。
详见：https://blog.csdn.net/qq_37964547/article/details/81429627

#### 继上一题，说明socket网络编程有哪些系统调用？其中close是一次就能直接关闭的吗，半关闭状态是怎么产生的？

> socket()    创建套接字   
> bind()      绑定本机端口    
> connect()   建立连接     （TCP三次握手在调用这个函数时进行）
> listen()    监听端口
> accept()    接受连接
> recv(), read(), recvfrom()  数据接收
> send(), write(), sendto()   数据发送
> close(), shutdown() 关闭套接字

==使用close()时，只有当套接字的引用计数为0的时候才会终止连接，而用shutdown()就可以直接关闭连接==

详见：https://blog.csdn.net/junjun150013652/article/details/37994907

TCP连接与断开详解： https://www.cnblogs.com/felixzh/p/8359066.html

#### 对路由协议的了解

- RIP
- OSPF



#### UDP如何实现可靠传输

因为UDP是无连接的协议，所以在传输层上无法保证可靠传输，要想实现可靠传输，只能从应用层实现。需要实现seq/ack机制，重传机制和窗口确认机制。

就要接收方收到UDP之后回复个确认包，发送方有个机制，收不到确认包就要重新发送，每个包有递增的序号，接收方发现中间丢了包就要发重传请求，当网络太差时候频繁丢包，防止越丢包越重传的恶性循环，要有个发送窗口的限制，发送窗口的大小根据网络传输情况调整，调整算法要有一定自适应性。
————————————————
原文链接：https://blog.csdn.net/neverever01/article/details/108237531

#### TCP和UDP的区别

- TCP是面向连接的协议，提供的是可靠传输，在收发数据前要通过三次握手来建立连接，使用ACK来对是否收到数据进行验证，而UDP是无连接的协议，不管对方是否收到，收到的是否正确。
- TCP采用拥塞避免和流量控制算法，UDP没有
- TCP对系统资源的要求高，所以速度比UDP慢
- TCP包没有边界，会发生沾包问题，所以采用分包和拆包

#### ping原理

- **Ping**命令会构建一个固定格式的ICMP请求数据包，然后由ICMP协议将这个数据包连同地址一起交给**IP层协议**，IP协议将目的地址和本机地址构建一个IP数据包，并在一个==映射表==中查找出目的地址对应的**MAC地址**，一起交给数据链路层，后者构建一个数据帧，目的地址是IP层传过来的物理地址，源地址则是本机的物理地址，还要附加上一些控制信息，将他们传送出去
- 映射表由**ARP**实现，是一种地址解析协议，将IP地址转换为物理地址。
  - 首先分析IP地址确定目的主机和自己是否在同一网段，如果是则查看ARP缓存，或者使用ARP协议发送广播。如果不是，则寻找网关发送ARP数据包。

#### TCP（UDP，IP）等首部的认识（http请求报文构成）

https://blog.csdn.net/zhangliangzi/article/details/52554439

#### ==在浏览器中输入URL后执行的全部过程==

- 首先是域名解析，客户端使用DNS协议将URL解析为对应的IP地址；
- 建立TCP连接，客户端与服务器三次握手；
- 接着是HTTP连接，客户端向服务器发送http连接请求；（http无需额外的连接）
- 服务器对请求进行处理，并返回响应
- 客户端收到http响应，进行数据解析
  - 首先是html文档解析，浏览器会将html文档生成解析树，也就是DOM树，它有dom元素和属性节点组成；
  - 

#### TCP拥塞控制

![拥塞控制](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9qaWFudHVrdS1saXdlbmJpbi5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tLyVFOSU5RCVBMiVFNyVCQiU4RiVFNSU5MCU4OCVFOSU5QiU4Ni8lRTYlOEIlQTUlRTUlQTElOUUlRTYlOEUlQTclRTUlODglQjYucG5n?x-oss-process=image/format,png)

- 防止过多的数据注入到网络中，发送方维持一个拥塞窗口cwnd的状态变量。拥塞窗口的大小取决于网络的拥塞程度，并且在动态地变化。
- 慢启动：主机先以比较小的拥塞窗口进行发送，然后每次翻倍。为了防止拥塞窗口cwnd增长过大引起网络拥塞，还要另外设置一个慢启动阈值ssthresh状态变量，当拥塞窗口的大小超过慢启动阈值的时候，停止时慢开始，转为拥塞避免算法
- 拥塞避免：让cwnd缓慢地增大，每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍。
- 快速重传：当发送端连续收到三个重复的ack时，表示该数据段已经丢失，需要重发。此时慢启动阈值变为cwnd值的一半，cwnd变为ssth+3，然后+1+1
- 快速回复：当超过设定的时间没有收到ack时，表示网络拥塞，慢启动阈值ssth变为原来的一半，cwnd = 1，进入慢启动阶段

#### http协议与TCP的区别与联系

联系：HTTP是建立在TCP协议基础之上的，当浏览器需要从服务器获取网页数据的时候，会发出一次Http请求。HTTP会通过TCP建立起一个到服务器的连接通道，当本次请求需要的数据传输完毕后，HTTP会立即将TCP连接断开，这个过程很短。

区别：HTTP是应用层协议，定义的是数据的内容的规范，TCP是传输层的协议，定义的是数据传输和连接的规范。

#### HTTP和HTTPS的区别，由Http升级为HTTPS需要哪些操作

- http是超文本传输协议，信息是明文传输，https则是具有安全性的**SSL**加密传输协议
- http端口是80，https端口是443
- http连接简单，是无状态的；https协议是由SSL+HTTP协议构建的可加密传输，身份认证的网络协议
- https需要CA证书

#### https的具体实现，怎么确保安全性

通过非对称加密的RSA算法和对称加密的传输过程确定

- SSL是传输层的协议
- 客户端浏览器使用https的URL访问web服务器，要求与服务器建立SSL连接
- 服务器将网站的数字证书中的公钥发送一份给浏览器，私钥自己保存
- 浏览器生成加密使用的密钥（**三个随机数**（1.第一次请求服务器时附带的随机数，2.服务器返回时的随机数，3.客户端浏览器收到返回时的随机数）的哈希）
- 浏览器用公钥将密钥加密，发送给服务器
- 服务器用自己的私钥解密出会话密钥，利用会话密钥来加密与客户端之间的通信

#### 单条记录高并发访问的优化

- 服务器端：
  - 使用缓存，如redis等
  - 使用分布式架构进行处理
  - 将静态页面和静态资源存储在静态资源服务器，需要处理的数据使用服务器进行计算后返回
  - 将静态资源尽可能在客户端进行缓存
  - 采用ngnix进行负载均衡（Engine X）
- 数据库端：
  - 采用主从复制，读写分离措施
  - 建立适当的索引
  - 分库分表

#### DNS的工作过程和原理

![img](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9qaWFudHVrdS1saXdlbmJpbi5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tLyVFOSU5RCVBMiVFNyVCQiU4RiVFNSU5MCU4OCVFOSU5QiU4Ni9ETlMlRTYlOUYlQTUlRTglQUYlQTIlRTUlOUIlQkUlRTglQTclQTMucG5n?x-oss-process=image/format,png)

DNS解析有两种方式：递归查询和迭代查询

- 递归查询 用户先向本地域名服务器查询，如果本地域名服务器的缓存没有IP地址映射记录，就向根域名服务器查询，根域名服务器就会向顶级域名服务器查询，顶级域名服务器向权限域名服务器查询，查到结果后依次返回。
- 迭代查询 用户向本地域名服务器查询，如果没有缓存，本地域名服务器会向根域名服务器查询，根域名服务器返回顶级域名服务器的地址，本地域名服务器再向顶级域名服务器查询，得到权限域名服务器的地址，本地域名服务器再向权限域名服务器查询得到结果

