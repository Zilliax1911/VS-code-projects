## 基本TCP[套接字](https://so.csdn.net/so/search?q=套接字&spm=1001.2101.3001.7020)编程

https://blog.csdn.net/qq_34201858/article/details/104139384/



![img](https://img-blog.csdnimg.cn/20200202111805754.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MjAxODU4,size_16,color_FFFFFF,t_70)

### socket函数

为了执行网络 IO，一个进程必须做的第一件事情就是调用socket函数，指定期望的通信协议类型。

```C++
#include <sys/types.h>
#include <sys/socket.h>
int socket (int domain, int type,int protocol)
```

socket() 打开一个网络通讯端口，如果成功的话，就像open()一样返回一个文件描述符，应用程序可以像读写文件一样用 read/write 在网络上收发数据，如果 socket() 调用出错则返回-1。对于IPV4，domain 参数指定为 AF_INET。对于TCP协议，type参数指定为SOCK_STREAM，表示面向流的传输协议。如果是 UDP 协议，则 type 参数指定为 SOCK_DGRAM，表示面向数据报的传输协议。protocol 参数指定为 0 即可。

### bind函数

将一个socket 与 socket 地址绑定称为给socket 命名，命名的系统调用是bind，定义如下

```C++
#include <sys/types.h>
#include <sys/socket.h>
int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);
```

- sockfd:
  - socket文件描述符
- addr:
  - 构造出IP地址加端口号
- addrlen：
  - sizeof(addr)长度
- 返回值：
  - 成功返回0，失败-1

